
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/04-environment/gaia_patched_catalog.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_04-environment_gaia_patched_catalog.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_04-environment_gaia_patched_catalog.py:


GAIA Patched Catalog
====================

Displays the patched GAIA catalog

.. GENERATED FROM PYTHON SOURCE LINES 7-16

.. code-block:: Python


    import os

    import matplotlib.pyplot as plt
    import numpy as np

    import mirage as mr
    import mirage.vis as mrv








.. GENERATED FROM PYTHON SOURCE LINES 17-18

Let's set up a grid of directions to plot the starlight signal at in J2000

.. GENERATED FROM PYTHON SOURCE LINES 18-26

.. code-block:: Python


    dec_grid, ra_grid = np.meshgrid(
        np.linspace(-np.pi / 2, np.pi / 2, 180),
        np.linspace(-np.pi, np.pi, 360),
        indexing='ij',
    )
    look_dir_grid = mr.ra_dec_to_eci(ra_grid.flatten(), dec_grid.flatten())








.. GENERATED FROM PYTHON SOURCE LINES 27-28

Conversion from :math:`S_{10}` to irradiance

.. GENERATED FROM PYTHON SOURCE LINES 28-38

.. code-block:: Python


    solid_angle_sterad = np.deg2rad(1) ** 2
    lambdas = np.linspace(1e-8, 1e-6, int(1e2))
    strint = mr.proof_zero_mag_stellar_spectrum(lambdas)  # Approximately same as STRINT
    s10_to_irrad = (
        10**-4 * solid_angle_sterad * np.rad2deg(1) ** 2 * np.trapz(strint, lambdas)
    )
    m_s10 = mr.irradiance_to_apparent_magnitude(s10_to_irrad)
    s10_to_irrad_true = np.rad2deg(1) ** 2 * mr.apparent_magnitude_to_irradiance(10)








.. GENERATED FROM PYTHON SOURCE LINES 39-40

Let's first display the raw :math:`S_{10}` brightness of the patched catalog

.. GENERATED FROM PYTHON SOURCE LINES 40-71

.. code-block:: Python


    x = np.load(os.path.join(os.environ['SRCDIR'], '..', 'patched6.npz'))
    signal_3d = x['isl']
    lims = x['mag_lims']

    start_ind = np.argwhere(lims[:, 0] == 14).squeeze()
    signal_2d = np.sum(signal_3d[:, :, start_ind:], axis=2)

    xx, yy = np.meshgrid(
        np.linspace(-180, 180, signal_2d.shape[1]), np.linspace(-90, 90, signal_2d.shape[0])
    )

    plt.figure(figsize=(9, 4))
    plt.imshow(
        np.flipud(np.log10(signal_2d)),
        cmap='plasma',
        extent=(-180, 180, -90, 90),
    )

    mrv.texit(
        'Patched GAIA Catalog $m_{G} \geq 14$',
        'Right Ascension [deg]',
        'Declination [deg]',
        grid=False,
    )
    plt.colorbar(
        label=r'Zenith signal $\log_{10} \: \frac{W}{m^2\cdot \text{deg}^2}$',
        cax=mrv.get_cbar_ax(),
    )
    plt.tight_layout()
    plt.show()



.. image-sg:: /gallery/04-environment/images/sphx_glr_gaia_patched_catalog_001.png
   :alt: Patched GAIA Catalog $m_{G} \geq 14$
   :srcset: /gallery/04-environment/images/sphx_glr_gaia_patched_catalog_001.png, /gallery/04-environment/images/sphx_glr_gaia_patched_catalog_001_2_00x.png 2.00x
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    /Users/liamrobinson/Documents/maintained-research/mirage/examples/04-environment/gaia_patched_catalog.py:54: RuntimeWarning: divide by zero encountered in log10
      np.flipud(np.log10(signal_2d)),





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.581 seconds)


.. _sphx_glr_download_gallery_04-environment_gaia_patched_catalog.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: gaia_patched_catalog.ipynb <gaia_patched_catalog.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: gaia_patched_catalog.py <gaia_patched_catalog.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: gaia_patched_catalog.zip <gaia_patched_catalog.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
